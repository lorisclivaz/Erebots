(this["webpackJsonpcovid19-frontend"]=this["webpackJsonpcovid19-frontend"]||[]).push([[66],{871:function(e,t,a){},930:function(e,t,a){"use strict";a.r(t);var n=a(196),r=a(142),i=a(72),s=a(73),c=a(108),l=a(195),o=a(194),d=a(1),m=a.n(d),g=a(570),u=a(571),h=a(568),b=a(572),f=a(575),E=a(619),j=a(616),O=a(617),v=a(618),p=a(569),C=a(605),D=a(611),w=a(612),x=a(593),y=a(580),N=a(197),S=a(567),k=a(587),M=a(583),I=a(109),F=a(53),T=(a(871),a(639)),H=a.n(T),P=function(e){Object(l.a)(d,e);var t=Object(o.a)(d);function d(e){var a,s;return Object(i.a)(this,d),(s=t.call(this,e)).exerciseDataField="exerciseData",s.fieldNames=[s.exerciseDataField],s.formID="exercise-form",s.state=Object(r.a)(Object(r.a)({},Object(N.b)(s.fieldNames)),{},(a={objID:""},Object(n.a)(a,k.e,""),Object(n.a)(a,k.g,""),Object(n.a)(a,k.f,""),Object(n.a)(a,k.d,""),Object(n.a)(a,k.c,""),Object(n.a)(a,"uploadingChanges",!1),Object(n.a)(a,"errorMessage",""),Object(n.a)(a,"deletionModalOpen",!1),a)),s.setCurrentStateFromData.bind(Object(c.a)(s)),s.getCurrentID.bind(Object(c.a)(s)),s.handleTextChange.bind(Object(c.a)(s)),s.sendChangesToServer.bind(Object(c.a)(s)),s.setErrorMessage.bind(Object(c.a)(s)),s.toggleDeletionModal.bind(Object(c.a)(s)),s.deleteCurrentFromServer.bind(Object(c.a)(s)),s.isHandlingNewObject()||Object(N.d)(Object(c.a)(s),s.exerciseDataField,y.r,{serverEndPoint:y.g,id:s.getCurrentID()},(function(e){return s.setCurrentStateFromData(e)})),s}return Object(s.a)(d,[{key:"setCurrentStateFromData",value:function(e){var t;this.setState((t={objID:e[k.b][S.b]},Object(n.a)(t,k.e,e[k.e]),Object(n.a)(t,k.g,e[k.g]||""),Object(n.a)(t,k.f,e[k.f]||""),Object(n.a)(t,k.d,e[k.d]||""),Object(n.a)(t,k.c,e[k.c]||""),t))}},{key:"getCurrentID",value:function(){return this.props.match.params.id}},{key:"isHandlingNewObject",value:function(){return"new"===this.getCurrentID()}},{key:"handleTextChange",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"setErrorMessage",value:function(e){this.setState({uploadingChanges:!1,errorMessage:e}),window.scrollTo(0,0)}},{key:"sendChangesToServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(F.b)("Exercise.js","Called sendChangesToServer with insertNew=".concat(t)),this.setState({uploadingChanges:!0,errorMessage:""});var a=new FormData(document.getElementById(this.formID));if(a.get(k.e)){var n;if(t)n=Object(y.v)(y.a,y.g,{formDataObject:a});else{var r=this.getCurrentID();n=Object(y.v)(y.c,y.g,{id:r,formDataObject:a})}n.then((function(t){Object(F.a)("Exercise.js","Saved changes to server:",t),e.setCurrentStateFromData(t),e.setState({uploadingChanges:!1}),window.history.back()}),(function(t){Object(F.c)("Exercise.js","Error from server saving changes:",t.message),e.setErrorMessage(t.message)}))}else this.setErrorMessage("English description is mandatory!")}},{key:"toggleDeletionModal",value:function(){this.setState({deletionModalOpen:!this.state.deletionModalOpen})}},{key:"deleteCurrentFromServer",value:function(){var e=this;Object(y.v)(y.b,y.g,{id:this.getCurrentID()}).then((function(t){Object(F.a)("Exercise.js","Deleted from server:",t),e.setState({uploadingChanges:!1}),window.history.back()}),(function(t){Object(F.c)("Exercise.js","Error from server during deletion:",t.message),e.setErrorMessage(t.message)})),this.toggleDeletionModal()}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(g.a,null,m.a.createElement(u.a,{lg:12},""===this.state.errorMessage?null:Object(N.c)(this.state.errorMessage),m.a.createElement(h.a,null,m.a.createElement(b.a,null,m.a.createElement("strong",null,m.a.createElement("i",{className:"icon-info pr-1"}),this.isHandlingNewObject()?"New Exercise":"Exercise ID: ".concat(this.state.objID)),this.isHandlingNewObject()?null:m.a.createElement(f.a,{color:"danger",onClick:this.toggleDeletionModal.bind(this),className:"mr-1 float-right"},m.a.createElement("i",{className:"fa fa-trash"})," Delete"),m.a.createElement(E.a,{isOpen:this.state.deletionModalOpen,toggle:this.toggleDeletionModal.bind(this),className:"modal-danger"},m.a.createElement(j.a,{toggle:this.toggleDeletionModal.bind(this)},"Delete Exercise"),m.a.createElement(O.a,null,"This will permanently delete the current Exercise from database.",m.a.createElement("br",null),m.a.createElement("br",null),"References to this Exercise will be removed from every data structure in which it is. This possibly includes Exercise Sets and user Sport Sessions."),m.a.createElement(v.a,null,m.a.createElement(f.a,{color:"danger",onClick:this.deleteCurrentFromServer.bind(this)},"Delete")," ",m.a.createElement(f.a,{color:"secondary",onClick:this.toggleDeletionModal.bind(this)},"Cancel")))),m.a.createElement(p.a,null,function(){var t=m.a.createElement("div",null,m.a.createElement(C.a,{id:e.formID,action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},[k.c,k.e,k.g,k.f,k.d].map((function(t){var a=Object(M.a)(t,k.a);return m.a.createElement(D.a,{row:!0,key:t},m.a.createElement(u.a,{md:"2"},m.a.createElement(w.a,{htmlFor:"textarea-input-".concat(t)},a.keyPrettyNameLong)),m.a.createElement(u.a,{xs:"12",md:"10"},m.a.createElement(x.a,{type:"textarea",rows:"2",name:t,id:"textarea-input-".concat(t),placeholder:"".concat(a.keyPrettyNameLong," ..."),value:e.state[t],onChange:function(a){return e.handleTextChange(t,a.target.value)}})))})),m.a.createElement(D.a,{row:!0},m.a.createElement(u.a,{md:"2"},m.a.createElement(w.a,{htmlFor:"file-input"},"Exercise GIF")),m.a.createElement(u.a,{xs:"12",md:"10"},m.a.createElement(x.a,{type:"file",id:"file-input",name:"gif-file",accept:"image/gif"}))),m.a.createElement(D.a,{row:!0},m.a.createElement(u.a,{md:"2"},m.a.createElement(w.a,{htmlFor:"image-preview"},"GIF Preview")),m.a.createElement(u.a,{xs:"12",md:"10"},e.isHandlingNewObject()?"Exercise image preview":m.a.createElement(H.a,{id:"image-preview",alt:"Exercise image preview",src:"".concat(y.f).concat(y.g,"/").concat(e.getCurrentID(),"/gif?random=").concat(performance.now()),style:{width:"40%"}})))),m.a.createElement("div",{className:"form-actions float-right"},m.a.createElement(f.a,{type:"submit",color:"primary",className:"mr-2",onClick:function(){return e.sendChangesToServer(e.isHandlingNewObject())},disabled:e.state.uploadingChanges},e.state.uploadingChanges?m.a.createElement("img",{className:"spinner",alt:"spinner",src:a(456)}):null,e.isHandlingNewObject()?"Insert":"Save changes"),m.a.createElement(I.Link,{to:"/home/modify/exercises"},m.a.createElement(f.a,{color:"secondary",disabled:e.state.uploadingChanges},"Cancel"))));return e.isHandlingNewObject()?t:Object(N.f)(e,e.exerciseDataField,(function(e){return t}),Object(N.a)({}))}())))))}}]),d}(d.Component);t.default=P}}]);
//# sourceMappingURL=66.bf0001ce.chunk.js.map