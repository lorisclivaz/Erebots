(this["webpackJsonpcovid19-frontend"]=this["webpackJsonpcovid19-frontend"]||[]).push([[24],{567:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r}));var n="$oid",r="weekday",i="month";function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return void 0!==e?t?e.shortDescription:e.longDescription:void 0}},573:function(e,t){function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},575:function(e,t,a){"use strict";var n=a(21),r=a(45),i=a(566),o=a(35),c=a(1),l=a.n(c),s=a(6),u=a.n(s),d=a(84),f=a.n(d),m=a(40),b={active:u.a.bool,"aria-label":u.a.string,block:u.a.bool,color:u.a.string,disabled:u.a.bool,outline:u.a.bool,tag:m.q,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),onClick:u.a.func,size:u.a.string,children:u.a.node,className:u.a.string,cssModule:u.a.object,close:u.a.bool},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).onClick=a.onClick.bind(Object(i.a)(a)),a}Object(o.a)(t,e);var a=t.prototype;return a.onClick=function(e){this.props.disabled?e.preventDefault():this.props.onClick&&this.props.onClick(e)},a.render=function(){var e=this.props,t=e.active,a=e["aria-label"],i=e.block,o=e.className,c=e.close,s=e.cssModule,u=e.color,d=e.outline,b=e.size,g=e.tag,h=e.innerRef,p=Object(r.a)(e,["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"]);c&&"undefined"===typeof p.children&&(p.children=l.a.createElement("span",{"aria-hidden":!0},"\xd7"));var v="btn"+(d?"-outline":"")+"-"+u,y=Object(m.m)(f()(o,{close:c},c||"btn",c||v,!!b&&"btn-"+b,!!i&&"btn-block",{active:t,disabled:this.props.disabled}),s);p.href&&"button"===g&&(g="a");var j=c?"Close":null;return l.a.createElement(g,Object(n.a)({type:"button"===g&&p.onClick?"button":void 0},p,{className:y,ref:h,onClick:this.onClick,"aria-label":a||j}))},t}(l.a.Component);g.propTypes=b,g.defaultProps={color:"secondary",tag:"button"},t.a=g},582:function(e,t){e.exports=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r},e.exports.__esModule=!0,e.exports.default=e.exports},587:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return m}));var n,r=a(196),i=a(567),o="_id",c="text_en",l="text_it",s="text_fr",u="text_de",d="label",f=(n={},Object(r.a)(n,o,{keyPrettyNameShort:"ID",keyPrettyNameLong:"Exercise ID",valuePrettifier:function(e){return e[i.b]}}),Object(r.a)(n,c,{keyPrettyNameShort:"English",keyPrettyNameLong:"English Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,l,{keyPrettyNameShort:"Italian",keyPrettyNameLong:"Italian Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,s,{keyPrettyNameShort:"French",keyPrettyNameLong:"French Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,u,{keyPrettyNameShort:"German",keyPrettyNameLong:"German Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,d,{keyPrettyNameShort:"Label",keyPrettyNameLong:"Mnemonic Label",valuePrettifier:function(e){return e}}),Object(r.a)(n,"gif_path",{keyPrettyNameShort:"GIF",keyPrettyNameLong:"GIF Image",valuePrettifier:function(e){return e}}),n);function m(e){var t={};return e.forEach((function(e){t[e[o][i.b]]=e[d]||e[c]})),t}},597:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return u})),a.d(t,"g",(function(){return f}));var n,r=a(196),i=a(567),o="_id",c="text_en",l="text_it",s="text_fr",u="text_de",d=(n={},Object(r.a)(n,o,{keyPrettyNameShort:"ID",keyPrettyNameLong:"User Goal ID",valuePrettifier:function(e){return e[i.b]}}),Object(r.a)(n,c,{keyPrettyNameShort:"English",keyPrettyNameLong:"English Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,l,{keyPrettyNameShort:"Italian",keyPrettyNameLong:"Italian Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,s,{keyPrettyNameShort:"French",keyPrettyNameLong:"French Description",valuePrettifier:function(e){return e}}),Object(r.a)(n,u,{keyPrettyNameShort:"German",keyPrettyNameLong:"German Description",valuePrettifier:function(e){return e}}),n);function f(e){var t={};return e.forEach((function(e){t[e[o][i.b]]=e[c]})),t}},602:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return u}));var n,r=a(196),i=a(567),o="_id",c="exercise_list",l="suitable_for_goals",s=(n={},Object(r.a)(n,o,{keyPrettyNameShort:"ID",keyPrettyNameLong:"Exercise Set ID",valuePrettifier:function(e){return e[i.b]}}),Object(r.a)(n,c,{keyPrettyNameShort:"Exercise List",keyPrettyNameLong:"Exercise List",valuePrettifier:function(e){return JSON.stringify(e)}}),Object(r.a)(n,l,{keyPrettyNameShort:"For Goals",keyPrettyNameLong:"Suitable For Goals",valuePrettifier:function(e){return JSON.stringify(e)}}),n);function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:", ",n={};return e.forEach((function(e){n[e[o][i.b]]=e[c].map((function(e){return t[e[i.b]]})).join(a)})),n}},639:function(e,t,a){"use strict";var n=a(455);t.__esModule=!0,t.default=void 0;var r=n(a(573)),i=n(a(582)),o=n(a(1)),c=n(a(6)),l=n(a(84)),s=a(577),u={tag:s.tagPropType,top:c.default.bool,bottom:c.default.bool,className:c.default.string,cssModule:c.default.object},d=function(e){var t=e.className,a=e.cssModule,n=e.top,c=e.bottom,u=e.tag,d=(0,i.default)(e,["className","cssModule","top","bottom","tag"]),f="card-img";n&&(f="card-img-top"),c&&(f="card-img-bottom");var m=(0,s.mapToCssModules)((0,l.default)(t,f),a);return o.default.createElement(u,(0,r.default)({},d,{className:m}))};d.propTypes=u,d.defaultProps={tag:"img"};var f=d;t.default=f},873:function(e,t,a){},932:function(e,t,a){"use strict";a.r(t);var n=a(196),r=a(142),i=a(72),o=a(73),c=a(108),l=a(195),s=a(194),u=a(1),d=a.n(u),f=a(570),m=a(571),b=a(568),g=a(572),h=a(575),p=a(619),v=a(616),y=a(617),j=a(618),E=a(569),O=a(605),S=a(611),k=a(612),N=a(580),x=a(197),P=a(567),C=a(109),D=a(53),M=a(639),w=a.n(M),I=(a(873),a(602)),_=a(720),F=a(587),L=a(597),G=function(e){Object(l.a)(u,e);var t=Object(s.a)(u);function u(e){var a,o;return Object(i.a)(this,u),(o=t.call(this,e)).allExercises="allExercises",o.allUserGoals="allUserGoals",o.exerciseSetField="exerciseSet",o.fieldNames=[o.exerciseSetField,o.allExercises,o.allUserGoals],o.formID="exercise-set-form",o.state=Object(r.a)(Object(r.a)({},Object(x.b)(o.fieldNames)),{},(a={objID:""},Object(n.a)(a,I.a,[]),Object(n.a)(a,I.d,[]),Object(n.a)(a,"uploadingChanges",!1),Object(n.a)(a,"errorMessage",""),Object(n.a)(a,"deletionModalOpen",!1),a)),o.setCurrentStateFromData.bind(Object(c.a)(o)),o.getCurrentID.bind(Object(c.a)(o)),o.handleSelectedEvent.bind(Object(c.a)(o)),o.sendChangesToServer.bind(Object(c.a)(o)),o.setErrorMessage.bind(Object(c.a)(o)),o.toggleDeletionModal.bind(Object(c.a)(o)),o.deleteCurrentFromServer.bind(Object(c.a)(o)),Object(x.d)(Object(c.a)(o),o.allExercises,N.p,{serverEndPoint:N.g}),Object(x.d)(Object(c.a)(o),o.allUserGoals,N.p,{serverEndPoint:N.n}),o.isHandlingNewObject()||Object(x.d)(Object(c.a)(o),o.exerciseSetField,N.r,{serverEndPoint:N.i,id:o.getCurrentID()},(function(e){return o.setCurrentStateFromData(e)})),o}return Object(o.a)(u,[{key:"setCurrentStateFromData",value:function(e){var t;this.setState((t={objID:e[I.c][P.b]},Object(n.a)(t,I.a,e[I.a].map((function(e){return e[P.b]}))||[]),Object(n.a)(t,I.d,e[I.d].map((function(e){return e[P.b]}))||[]),t))}},{key:"getCurrentID",value:function(){return this.props.match.params.id}},{key:"isHandlingNewObject",value:function(){return"new"===this.getCurrentID()}},{key:"handleSelectedEvent",value:function(e,t){Object(D.a)("ExerciseSet.js","Changed selection for field ".concat(e,": "),t);var a=t.map((function(e){return e.value})),n={};n[e]=a,this.setState(n)}},{key:"setErrorMessage",value:function(e){this.setState({uploadingChanges:!1,errorMessage:e}),window.scrollTo(0,0)}},{key:"sendChangesToServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(D.b)("ExerciseSet.js","Called sendChangesToServer with insertNew=".concat(t)),this.setState({uploadingChanges:!0,errorMessage:""});var a=new FormData(document.getElementById(this.formID));if(a.append(I.a,JSON.stringify(this.state[I.a])),a.append(I.d,JSON.stringify(this.state[I.d])),"[]"===a.get(I.a))this.setErrorMessage("Select at least one exercise!");else if("[]"===a.get(I.d))this.setErrorMessage("Select at least one goal!");else{var n;if(t)n=Object(N.v)(N.a,N.i,{formDataObject:a});else{var r=this.getCurrentID();n=Object(N.v)(N.c,N.i,{id:r,formDataObject:a})}n.then((function(t){Object(D.a)("ExerciseSet.js","Saved changes to server:",t),e.setCurrentStateFromData(t),e.setState({uploadingChanges:!1}),window.history.back()}),(function(t){Object(D.c)("ExerciseSet.js","Error from server saving changes:",t.message),e.setErrorMessage(t.message)}))}}},{key:"toggleDeletionModal",value:function(){this.setState({deletionModalOpen:!this.state.deletionModalOpen})}},{key:"deleteCurrentFromServer",value:function(){var e=this;Object(N.v)(N.b,N.i,{id:this.getCurrentID()}).then((function(t){Object(D.a)("ExerciseSet.js","Deleted from server:",t),e.setState({uploadingChanges:!1}),window.history.back()}),(function(t){Object(D.c)("ExerciseSet.js","Error from server during deletion:",t.message),e.setErrorMessage(t.message)})),this.toggleDeletionModal()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"animated fadeIn"},d.a.createElement(f.a,null,d.a.createElement(m.a,{lg:12},""===this.state.errorMessage?null:Object(x.c)(this.state.errorMessage),d.a.createElement(b.a,null,d.a.createElement(g.a,null,d.a.createElement("strong",null,d.a.createElement("i",{className:"icon-info pr-1"}),this.isHandlingNewObject()?"New Exercise Set":"Exercise Set ID: ".concat(this.state.objID)),this.isHandlingNewObject()?null:d.a.createElement(h.a,{color:"danger",onClick:this.toggleDeletionModal.bind(this),className:"mr-1 float-right"},d.a.createElement("i",{className:"fa fa-trash"})," Delete"),d.a.createElement(p.a,{isOpen:this.state.deletionModalOpen,toggle:this.toggleDeletionModal.bind(this),className:"modal-danger"},d.a.createElement(v.a,{toggle:this.toggleDeletionModal.bind(this)},"Delete Exercise Set"),d.a.createElement(y.a,null,"This will permanently delete the current Exercise Set from database.",d.a.createElement("br",null),d.a.createElement("br",null),"References to this Exercise Set will be removed from all Exercise Set Mappings in which it is. User Sport Sessions referencing this Exercise Set will be also removed."),d.a.createElement(j.a,null,d.a.createElement(h.a,{color:"danger",onClick:this.deleteCurrentFromServer.bind(this)},"Delete")," ",d.a.createElement(h.a,{color:"secondary",onClick:this.toggleDeletionModal.bind(this)},"Cancel")))),d.a.createElement(E.a,null,function(){var t=Object(x.f)(e,e.allExercises,(function(t){return Object(x.f)(e,e.allUserGoals,(function(n){var r=Object(L.g)(n),i=Object(F.h)(t);return d.a.createElement("div",null,d.a.createElement(O.a,{id:e.formID,action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},d.a.createElement(S.a,{row:!0},d.a.createElement(m.a,{md:"2"},d.a.createElement(k.a,{htmlFor:"multiple-select".concat(I.a)},"Exercises")),d.a.createElement(m.a,{md:"4"},d.a.createElement(_.a,{options:t.map((function(e){return{label:(void 0!==e[F.c]?"".concat(e[F.c],": "):"")+e[F.e],value:e[F.b][P.b]}})),hasSelectAll:!1,value:e.state[I.a].map((function(e){return{label:i[e],value:e}})),onChange:function(t){return e.handleSelectedEvent(I.a,t)},labelledBy:"Select"})),d.a.createElement(m.a,{md:"2"},d.a.createElement(k.a,{htmlFor:"multiple-select".concat(I.d)},"Goals")),d.a.createElement(m.a,{md:"4"},d.a.createElement(_.a,{options:n.map((function(e){return{label:e[L.d],value:e[L.b][P.b]}})),hasSelectAll:!1,value:e.state[I.d].map((function(e){return{label:r[e],value:e}})),onChange:function(t){return e.handleSelectedEvent(I.d,t)},labelledBy:"Select"}))),d.a.createElement(S.a,{row:!0},d.a.createElement(m.a,{md:"2"},d.a.createElement(k.a,{htmlFor:"selected-images-preview"},"Selected Exercises Preview")),d.a.createElement(m.a,{xs:"12",md:"10",id:"selected-images-preview"},e.state[I.a].map((function(e){return d.a.createElement(w.a,{id:e,alt:"Exercise Image preview",key:e,src:"".concat(N.f).concat(N.g,"/").concat(e,"/gif?random=").concat(performance.now()),style:{width:"15%"},className:"mr-3"})}))))),d.a.createElement("div",{className:"form-actions float-right"},d.a.createElement(h.a,{type:"submit",color:"primary",className:"mr-2",onClick:function(){return e.sendChangesToServer(e.isHandlingNewObject())},disabled:e.state.uploadingChanges},e.state.uploadingChanges?d.a.createElement("img",{className:"spinner",alt:"spinner",src:a(456)}):null,e.isHandlingNewObject()?"Insert":"Save changes"),d.a.createElement(C.Link,{to:"/home/modify/exercise_sets"},d.a.createElement(h.a,{color:"secondary",disabled:e.state.uploadingChanges},"Cancel"))))}),Object(x.a)({}))}),Object(x.a)({}));return e.isHandlingNewObject()?t:Object(x.f)(e,e.exerciseSetField,(function(e){return t}),Object(x.a)({}))}())))))}}]),u}(u.Component);t.default=G}}]);
//# sourceMappingURL=24.463311bb.chunk.js.map