(this["webpackJsonpcovid19-frontend"]=this["webpackJsonpcovid19-frontend"]||[]).push([[67],{867:function(e,t,a){},926:function(e,t,a){"use strict";a.r(t);var n=a(196),r=a(142),s=a(72),i=a(73),o=a(108),l=a(195),c=a(194),d=a(1),u=a.n(d),g=a(570),m=a(571),h=a(568),b=a(572),j=a(575),f=a(619),O=a(616),v=a(617),p=a(618),E=a(569),C=a(605),D=a(611),y=a(612),w=a(593),M=a(580),N=a(197),k=a(567),S=a(583),I=a(109),F=a(53),T=(a(867),a(584)),q=function(e){Object(l.a)(d,e);var t=Object(c.a)(d);function d(e){var a,i;return Object(s.a)(this,d),(i=t.call(this,e)).questionDataField="questionData",i.fieldNames=[i.questionDataField],i.formID="question-form",i.state=Object(r.a)(Object(r.a)({},Object(N.b)(i.fieldNames)),{},(a={objID:""},Object(n.a)(a,T.f,""),Object(n.a)(a,T.h,""),Object(n.a)(a,T.g,""),Object(n.a)(a,T.e,""),Object(n.a)(a,T.c,""),Object(n.a)(a,T.d,""),Object(n.a)(a,"uploadingChanges",!1),Object(n.a)(a,"errorMessage",""),Object(n.a)(a,"deletionModalOpen",!1),a)),i.setCurrentStateFromData.bind(Object(o.a)(i)),i.getCurrentID.bind(Object(o.a)(i)),i.handleTextChange.bind(Object(o.a)(i)),i.sendChangesToServer.bind(Object(o.a)(i)),i.setErrorMessage.bind(Object(o.a)(i)),i.toggleDeletionModal.bind(Object(o.a)(i)),i.deleteCurrentFromServer.bind(Object(o.a)(i)),i.isHandlingNewObject()||Object(N.d)(Object(o.a)(i),i.questionDataField,M.r,{serverEndPoint:M.j,id:i.getCurrentID()},(function(e){return i.setCurrentStateFromData(e)})),i}return Object(i.a)(d,[{key:"setCurrentStateFromData",value:function(e){var t;this.setState((t={objID:e[T.b][k.b]},Object(n.a)(t,T.f,e[T.f]),Object(n.a)(t,T.h,e[T.h]||""),Object(n.a)(t,T.g,e[T.g]||""),Object(n.a)(t,T.e,e[T.e]||""),Object(n.a)(t,T.c,e[T.c]?e[T.c][k.b]:""),Object(n.a)(t,T.d,e[T.d]?e[T.d][k.b]:""),t))}},{key:"getCurrentID",value:function(){return this.props.match.params.id}},{key:"isHandlingNewObject",value:function(){return"new"===this.getCurrentID()}},{key:"handleTextChange",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"setErrorMessage",value:function(e){this.setState({uploadingChanges:!1,errorMessage:e}),window.scrollTo(0,0)}},{key:"sendChangesToServer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(F.b)("Question.js","Called sendChangesToServer with insertNew=".concat(t)),this.setState({uploadingChanges:!0,errorMessage:""});var a=new FormData(document.getElementById(this.formID));if(a.append(T.c,this.state[T.c]),a.append(T.d,this.state[T.d]),a.get(T.f)){var n;if(t)n=Object(M.v)(M.a,M.j,{formDataObject:a});else{var r=this.getCurrentID();n=Object(M.v)(M.c,M.j,{id:r,formDataObject:a})}n.then((function(t){Object(F.a)("Question.js","Saved changes to server:",t),e.setCurrentStateFromData(t),e.setState({uploadingChanges:!1}),window.history.back()}),(function(t){Object(F.c)("Question.js","Error from server saving changes:",t.message),e.setErrorMessage(t.message)}))}else this.setErrorMessage("English description is mandatory!")}},{key:"toggleDeletionModal",value:function(){this.setState({deletionModalOpen:!this.state.deletionModalOpen})}},{key:"deleteCurrentFromServer",value:function(){var e=this;Object(M.v)(M.b,M.j,{id:this.getCurrentID()}).then((function(t){Object(F.a)("Question.js","Deleted from server:",t),e.setState({uploadingChanges:!1}),window.history.back()}),(function(t){Object(F.c)("Question.js","Error from server during deletion:",t.message),e.setErrorMessage(t.message)})),this.toggleDeletionModal()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(g.a,null,u.a.createElement(m.a,{lg:12},""===this.state.errorMessage?null:Object(N.c)(this.state.errorMessage),u.a.createElement(h.a,null,u.a.createElement(b.a,null,u.a.createElement("strong",null,u.a.createElement("i",{className:"icon-info pr-1"}),this.isHandlingNewObject()?"New Question":"Question ID: ".concat(this.state.objID)),this.isHandlingNewObject()?null:u.a.createElement(j.a,{color:"danger",onClick:this.toggleDeletionModal.bind(this),className:"mr-1 float-right"},u.a.createElement("i",{className:"fa fa-trash"})," Delete"),u.a.createElement(f.a,{isOpen:this.state.deletionModalOpen,toggle:this.toggleDeletionModal.bind(this),className:"modal-danger"},u.a.createElement(O.a,{toggle:this.toggleDeletionModal.bind(this)},"Delete Question"),u.a.createElement(v.a,null,"This will permanently delete the current Question from database.",u.a.createElement("br",null),u.a.createElement("br",null),"References to this Question will be removed from every data structure in which it is. This means that every Exercise Set Mapping of this question will be also deleted and all users at this question level will not have a level anymore. Consider modifying questions instead of deleting and inserting them again."),u.a.createElement(p.a,null,u.a.createElement(j.a,{color:"danger",onClick:this.deleteCurrentFromServer.bind(this)},"Delete")," ",u.a.createElement(j.a,{color:"secondary",onClick:this.toggleDeletionModal.bind(this)},"Cancel")))),u.a.createElement(E.a,null,function(){var t=u.a.createElement("div",null,u.a.createElement(C.a,{id:e.formID,action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal"},[T.f,T.h,T.g,T.e].map((function(t){var a=Object(S.a)(t,T.a);return u.a.createElement(D.a,{row:!0,key:t},u.a.createElement(m.a,{md:"2"},u.a.createElement(y.a,{htmlFor:"textarea-input-".concat(t)},a.keyPrettyNameLong)),u.a.createElement(m.a,{xs:"12",md:"10"},u.a.createElement(w.a,{type:"textarea",rows:"2",name:t,id:"textarea-input-".concat(t),placeholder:"".concat(a.keyPrettyNameLong," ..."),value:e.state[t],onChange:function(a){return e.handleTextChange(t,a.target.value)}})))}))),u.a.createElement("div",{className:"form-actions float-right"},u.a.createElement(j.a,{type:"submit",color:"primary",className:"mr-2",onClick:function(){return e.sendChangesToServer(e.isHandlingNewObject())},disabled:e.state.uploadingChanges},e.state.uploadingChanges?u.a.createElement("img",{className:"spinner",alt:"spinner",src:a(456)}):null,e.isHandlingNewObject()?"Insert":"Save changes"),u.a.createElement(I.Link,{to:"/home/modify/questions"},u.a.createElement(j.a,{color:"secondary",disabled:e.state.uploadingChanges},"Cancel"))));return e.isHandlingNewObject()?t:Object(N.f)(e,e.questionDataField,(function(e){return t}),Object(N.a)({}))}())))))}}]),d}(d.Component);t.default=q}}]);
//# sourceMappingURL=67.d4b21f32.chunk.js.map