(this["webpackJsonpcovid19-frontend"]=this["webpackJsonpcovid19-frontend"]||[]).push([[60],{591:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var n=a(584),r=a(567);function i(e,t){return e.find((function(e){return e[n.b][r.b]===t}))}function s(e,t,a){for(var s=t;void 0!==s[n.c];){a(s=i(e,s[n.c][r.b]))}}function c(e){var t=e.find((function(e){return void 0===e[n.d]})),a=[];return a.push(t),s(e,t,(function(e){return a.push(e)})),a}function o(e,t){var a=0;return s(e,i(e,t),(function(e){return a++})),e.length-a}},651:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return p}));var n=a(635),r=a(598);function i(e,t,a){var n=e.chart,i=n.ctx;i.font="".concat(r.i.global.defaultFontSize,", ").concat(r.i.global.defaultFontStyle,", ").concat(r.i.global.defaultFontFamily),i.fillStyle=e.chart.config.options.defaultFontColor,i.textAlign="center",i.textBaseline="bottom",e.data.datasets.forEach((function(e,r){n.controller.getDatasetMeta(r).data.forEach((function(n,r){var s=a(e.data[r],t);i.fillText(s,n._model.x,n._model.y-5)}))}))}function s(e,t){i(e,t,(function(e,t){var a=e/t*100;return"".concat(Math.round(10*a)/10," %")}))}function c(e,t){i(e,t,(function(e,t){return"".concat(e)}))}var o=["rgba(50, 50, 50, 1)","rgba(0, 128, 255, 1)","rgba(255, 0, 127, 1)","rgba(0, 255, 255, 1)","rgba(0, 255, 128, 1)","rgba(0, 255, 0, 1)","rgba(128, 255, 0, 1)","rgba(255, 255, 0, 1)","rgba(255, 128, 0, 1)","rgba(255, 0, 0, 1)","rgba(255, 0, 255, 1)","rgba(127, 0, 255, 1)","rgba(0, 0, 255, 1)"],l=["rgba(155, 155, 155, 0.2)","rgba(0, 128, 255, 0.2)","rgba(255, 0, 127, 0.2)","rgba(0, 255, 255, 0.2)","rgba(0, 255, 128, 0.2)","rgba(0, 255, 0, 0.2)","rgba(128, 255, 0, 0.2)","rgba(255, 255, 0, 0.2)","rgba(255, 128, 0, 0.2)","rgba(255, 0, 0, 0.2)","rgba(255, 0, 255, 0.2)","rgba(127, 0, 255, 0.2)","rgba(0, 0, 255, 0.2)"],u={borderWidth:1},d={backgroundColor:l[0],borderColor:o[0],borderWidth:1,hoverBackgroundColor:"rgba(255, 99, 132, 0.4)",hoverBorderColor:"rgba(255, 99, 132, 1)"},p={tooltips:{enabled:!1,custom:n.CustomTooltips},maintainAspectRatio:!0,legend:{position:"bottom"},hover:{animationDuration:0}}},679:function(e,t,a){"use strict";a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return m}));var n=a(142),r=a(72),i=a(73),s=a(108),c=a(195),o=a(194),l=a(1),u=a.n(l),d=a(197),p=a(53),g=a(598),h="chartData",m="chartOptions",b=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var i;return Object(r.a)(this,a),(i=t.call(this,e)).chartDataField="chartData",i.loadData.bind(Object(s.a)(i)),i.state=Object(n.a)({},Object(d.b)([i.chartDataField])),i}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var r=this;JSON.stringify(e.apiFunctionParams)!==JSON.stringify(this.props.apiFunctionParams)&&(Object(p.a)("MyBaseStaticChart.js","Component should refresh the graph"),Object(p.a)("MyBaseStaticChart.js","oldProps",e),Object(p.a)("MyBaseStaticChart.js","newProps",this.props),this.setState(Object(n.a)({},Object(d.b)([this.chartDataField])),(function(){return r.loadData()})))}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){Object(d.d)(this,this.chartDataField,this.props.apiFunction,this.props.apiFunctionParams)}},{key:"render",value:function(){var e=this;return Object(d.f)(this,this.chartDataField,(function(t){if(Array.isArray(t)&&t.length||Object.keys(t).length){var a=e.props.dataManipulationLogic(t),n=a[h],r=a[m],i=e.props.chartType||g.a;return u.a.createElement("div",{className:"chart-wrapper"},u.a.createElement(i,{data:n,options:r}))}return Object(d.e)()}),this.props.loading?this.props.loading({}):Object(d.a)({pt:3,position:"center"}))}}]),a}(l.Component)},680:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),r=a.n(n),i=a(594),s=a(595),c=a(596),o=a(632),l=a(575);function u(e,t,a,n){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e},p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",g="".concat(t.join(),"_Open_").concat(p);return t.length>u?r.a.createElement(o.a,{isOpen:e.state[g],toggle:function(){var t={};t[g]=!e.state[g],e.setState(t)}},r.a.createElement(i.a,{caret:!0},d(a)),r.a.createElement(s.a,null,t.map((function(e){return r.a.createElement(c.a,{key:e,onClick:function(){return n(e)}},d(e))})))):t.map((function(e){return r.a.createElement(l.a,{key:e,color:"outline-secondary",onClick:function(){return n(e)},active:a===e},d(e))}))}},943:function(e,t,a){"use strict";a.r(t);var n=a(196),r=a(142),i=a(72),s=a(73),c=a(108),o=a(195),l=a(194),u=a(1),d=a.n(u),p=a(699),g=a(570),h=a(571),m=a(568),b=a(572),f=a(643),v=a(569),O=a(580),j=a(197),E=a(601),F=a(608),y=a(719),D=a(701),S=a(651),C=a(679),N=a(652),k=a(598),P=a(53),A=a(583),w="StaticAggregationChartWithValues.js",M=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return d.a.createElement(C.c,{apiFunction:this.props.apiFunction,apiFunctionParams:this.props.apiFunctionParams,chartType:this.props.chartType,loading:this.props.loading,dataManipulationLogic:function(t){Object(P.a)(w,"Entering data manipulation logic with:",t);var a=e.props.apiFunctionParams[O.d];Object(P.a)(w,"first dimension is:",a);var n=e.props.apiFunctionParams[O.e]||null;Object(P.a)(w,"second dimension is:",n);var i=null!==n;Object(P.a)(w,"Its a two dimensional graph:",i);var s,c,o=Object(A.a)(a,e.props.firstDimSpecificMapping),l=Object(A.a)(n,e.props.secondDimSpecificMapping);if(void 0!==o.rawValuesToDescriptionMap){s=Object.keys(o.rawValuesToDescriptionMap),Object(P.a)(w,"Our data model has a proper ordering for first dimension values: ",s);var u=Object.keys(t).filter((function(e){return!s.includes(e)}));Object(P.a)(w,"But there could be also non present labels to be added: ",u),s=s.concat(u),Object(P.a)(w,"Concatenation result is: ",s)}else s=Object.keys(t),Object(P.a)(w,"We don't have a predefined ordering according to our data model for first dimension values,\n           these are labels taken from received server data:",s),(e.props.sortDataLabelsDim1||void 0===e.props.sortDataLabelsDim1)&&(s=s.sort());if(i&&void 0!==l.rawValuesToDescriptionMap){c=Object.keys(l.rawValuesToDescriptionMap),Object(P.a)(w,"Our data model has a proper ordering for second dimension values: ",c);var d=new Set;Object.values(t).forEach((function(e){Array.isArray(e)||Object.keys(e).filter((function(e){return!c.includes(e)})).forEach((function(e){return d.add(e)}))})),Object(P.a)(w,"But there could be also non present labels to be added: ",d),c=c.concat(Object(y.a)(d)),Object(P.a)(w,"Concatenation result is: ",c)}else i&&(c=new Set,Object.values(t).forEach((function(e){Array.isArray(e)||Object.keys(e).forEach((function(e){return c.add(e)}))})),c=Object(y.a)(c),Object(P.a)(w,"We don't have a predefined ordering according to our data model for second dimension values,\n           these are labels taken from received server data:",c),(e.props.sortDataLabelsDim2||void 0===e.props.sortDataLabelsDim2)&&(c=c.sort()));Object(P.a)(w,"Now lets count the total of data and the max value");var p=0,g=0;s.forEach((function(e){void 0!==t[e]&&(i?c.forEach((function(a){void 0!==t[e][a]&&(p+=t[e][a].length,g<t[e][a].length&&(g=t[e][a].length))})):(p+=t[e].length,g<t[e].length&&(g=t[e].length)))})),Object(P.a)(w,"Computed data total count is '".concat(p,"' and Max Value is '").concat(g,"'"));var h={labels:s.map((function(e){return"uncatalogued"===e?Object(N.a)(e):o.valuePrettifier(e,!0,!1)})),datasets:i?c.map((function(e,a){return Object(r.a)(Object(r.a)({},S.b),{},{label:"uncatalogued"===e?Object(N.a)(e):l.valuePrettifier(e,!0,!1),data:s.map((function(a){return void 0!==t[a]&&t[a][e]?t[a][e].length:0})),backgroundColor:S.d[a+1],borderColor:S.e[a+1]})})):[Object(r.a)(Object(r.a)({},S.c),{},{label:e.props.singleDimensionDataLegend,data:s.map((function(e){return void 0!==t[e]?t[e].length:0}))})]};Object(P.a)(w,"Computed Chart Data");var m=e.props.writeDataValuesInGraph,b=Object(r.a)(Object(r.a)({},S.a),{},{animation:{duration:1,onComplete:function(){m(this,p)}},scales:{yAxes:[{display:e.props.chartType!==k.g,ticks:{beginAtZero:!0,suggestedMax:g+g/10}}]}});Object(P.a)(w,"Computed Chart Options");var f={};return f[C.a]=h,f[C.b]=b,f}})}}]),a}(u.Component),T=a(609),V=a(680),x=a(575),B=a(681),L=a.n(B),U=a(567),Q="None",J=[U.c,U.a],W=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).chartTypes={},n.showValues={},n.toggleFullScreen=function(){n.setState({isFullScreen:!n.state.isFullScreen})},n.chartTypes.Bar=k.a,n.chartTypes.Line=k.d,n.chartTypes.Radar=k.g,n.showValues.Percentage=S.f,n.showValues.Absolute=S.g,n.showValues["Hide values"]=function(e,t){return""},n.state={selectedAggregationField1:e.defaultAggregationField1||e.firstDimensionAggregationFields[0],selectedAggregationField2:e.defaultAggregationField2||Q,selectedChartType:e.defaultChartType||"Bar",selectedShowValues:e.defaultShowValues||"Percentage",isFullScreen:!1},n}return Object(s.a)(a,[{key:"changeAggregationField1",value:function(e){this.setState({selectedAggregationField1:e})}},{key:"changeAggregationField2",value:function(e){this.setState({selectedAggregationField2:e})}},{key:"changeChartType",value:function(e){this.setState({selectedChartType:e}),"Bar"===e?this.changeShowValues("Percentage"):"Line"===e?this.changeShowValues("Absolute"):"Radar"===e&&this.changeShowValues("Hide values")}},{key:"changeShowValues",value:function(e){this.setState({selectedShowValues:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedAggregationField1,n=t.selectedAggregationField2,i=t.selectedChartType,s=t.selectedShowValues;return d.a.createElement(L.a,{enabled:this.state.isFullScreen},d.a.createElement(m.a,{className:"full-screenable-node"},d.a.createElement(b.a,null,d.a.createElement("span",{className:"h5"},d.a.createElement("strong",null,this.props.title)),d.a.createElement("div",{className:"card-header-actions"},d.a.createElement(D.a,{className:"float-right","aria-label":"Toolbar with chart options button groups"},d.a.createElement(T.a,{vertical:!0,className:"mr-2","aria-label":"Aggregation selection group"},d.a.createElement(x.a,{disabled:!0,className:"btn-light"},"1\xb0 Dimension"),Object(V.a)(this,this.props.firstDimensionAggregationFields.filter((function(e){return e!==n})),a,this.changeAggregationField1.bind(this),2,(function(e){return Object(A.b)(e,!0)}),"firstDimension")),d.a.createElement(T.a,{vertical:!0,className:"mr-3","aria-label":"Aggregation selection group"},d.a.createElement(x.a,{disabled:!0,className:"btn-light"},"2\xb0 Dimension"),Object(V.a)(this,[Q].concat(Object(y.a)(this.props.secondDimensionAggregationFields.filter((function(e){return e!==a})))),n,this.changeAggregationField2.bind(this),2,(function(e){return Object(A.b)(e,!0)}),"secondDimension")),d.a.createElement(T.a,{vertical:!0,className:"","aria-label":"Chart group"},Object(V.a)(this,Object.keys(this.chartTypes),i,this.changeChartType.bind(this)),Object(V.a)(this,Object.keys(this.showValues),s,this.changeShowValues.bind(this))),d.a.createElement("i",{className:"".concat(this.state.isFullScreen?"fa fa-compress":"fa fa-expand"," ml-3"),onClick:this.toggleFullScreen})))),d.a.createElement(v.a,null,d.a.createElement(M,{apiFunction:this.props.apiFunction,apiFunctionParams:function(){var t=e.props.apiFunctionParams?Object(r.a)({},e.props.apiFunctionParams):{};return F.c.includes(a)&&(t[O.d]=a),F.c.includes(n)&&(t[O.e]=n),t}(),chartType:this.chartTypes[i],writeDataValuesInGraph:this.showValues[s],sortDataLabelsDim1:!J.includes(a),sortDataLabelsDim2:!J.includes(n),singleDimensionDataLegend:this.props.singleDimensionDataLegend||this.props.title,loading:this.props.loading,firstDimSpecificMapping:this.props.specificMappingsForFields,secondDimSpecificMapping:this.props.specificMappingsForFields}))))}}]),a}(u.Component),G=a(591),I=Object.keys(E.e)[0],R=Object.keys(E.e)[1],_=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).userCountField="patientCount",n.usersBySexField="usersBySex",n.allUserProfilesField="allUserProfiles",n.allUserEvaluationQuestions="allQuestions",n.fieldNames=[n.userCountField,n.usersBySexField,n.allUserProfilesField,n.allUserEvaluationQuestions],n.state=Object(r.a)(Object(r.a)({},Object(j.b)(n.fieldNames)),{},{collapsedPatientStatistics:!1}),Object(j.d)(Object(c.a)(n),n.userCountField,O.q,{serverEndPoint:O.l}),Object(j.d)(Object(c.a)(n),n.usersBySexField,O.p,{serverEndPoint:O.m,aggregateByDimension1:F.t}),Object(j.d)(Object(c.a)(n),n.allUserProfilesField,O.p,{serverEndPoint:O.m}),Object(j.d)(Object(c.a)(n),n.allUserEvaluationQuestions,O.p,{serverEndPoint:O.j}),n}return Object(s.a)(a,[{key:"createMaleOrFemaleProgressGroup",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=Object(A.a)(F.t);return Object(j.f)(this,t,(function(t){var i=0;Object.keys(t).forEach((function(e){return i+=t[e].length}));var s=(t[e]||[]).length,c=Math.round(1e3*s/i)/10;return d.a.createElement("div",{className:"progress-group"},d.a.createElement("div",{className:"progress-group-header"},n?d.a.createElement("i",{className:"progress-group-icon icon-user".concat(e===R?"-female":"")}):null,d.a.createElement("span",{className:"title"},r.valuePrettifier(e,!1,!1)),d.a.createElement("span",{className:"ml-auto font-weight-bold"},s," ",d.a.createElement("span",{className:"text-muted small"},"(",c," %)"))),d.a.createElement("div",{className:"progress-group-bars"},d.a.createElement(p.a,{className:"progress-xs",color:a,value:c})))}),d.a.createElement("div",{className:"progress-group"},d.a.createElement("div",{className:"progress-group-header"},d.a.createElement("span",{className:"title"},r.valuePrettifier(e,!1,!1)),Object(j.a)({position:"right",otherClasses:"ml-auto"})),d.a.createElement("div",{className:"progress-group-bars"},d.a.createElement(p.a,{className:"progress-xs",color:a,value:"0"}))))}},{key:"createMaleOrFemaleCallout",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"success",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return d.a.createElement("div",{className:"callout callout-".concat(a)},r?d.a.createElement("i",{className:"icon-user".concat(e===R?"-female":"")}):null,d.a.createElement("br",null),this.createMaleOrFemaleProgressGroup(e,t,n,!r))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"animated fadeIn"},d.a.createElement(g.a,null,d.a.createElement(h.a,null,d.a.createElement(m.a,null,d.a.createElement(b.a,null,"User statistics",d.a.createElement("div",{className:"card-header-actions"},d.a.createElement("div",{className:"card-header-action btn btn-minimize","data-target":"#patientStatisticsCard",onClick:function(){return e.setState({collapsedPatientStatistics:!e.state.collapsedPatientStatistics})}},d.a.createElement("i",{className:"icon-arrow-".concat(this.state.collapsedPatientStatistics?"down":"up")})))),d.a.createElement(f.a,{isOpen:!this.state.collapsedPatientStatistics,id:"patientStatisticsCard"},d.a.createElement(v.a,null,d.a.createElement(g.a,null,d.a.createElement(h.a,{xs:"24",md:"12",xl:"12"},d.a.createElement(g.a,null,d.a.createElement(h.a,{sm:"2"},d.a.createElement("div",{className:"callout callout-info"},d.a.createElement("small",{className:"text-muted"},"Total Users"),d.a.createElement("br",null),Object(j.f)(this,this.userCountField,(function(e){return d.a.createElement("strong",{className:"h4"},e.count)}),Object(j.a)({position:"left"})))),d.a.createElement(h.a,{sm:"5"},this.createMaleOrFemaleCallout(I,this.usersBySexField,"success","success")),d.a.createElement(h.a,{sm:"5"},this.createMaleOrFemaleCallout(R,this.usersBySexField,"success","success"))),d.a.createElement("hr",{className:"mt-0"}),Object(j.f)(this,this.allUserEvaluationQuestions,(function(e){var t=Object(n.a)({},F.m,Object(r.a)(Object(r.a)({},F.d[F.m]),{},{valuePrettifier:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;if("string"===typeof t)try{n=JSON.parse(t.replaceAll("'",'"'))}catch(i){}if("object"===typeof n){var r=Object(G.a)(e,n[U.b]);return a?"Level ".concat(r):"Question level ".concat(r)}return t}}));return d.a.createElement(g.a,null,d.a.createElement(h.a,{sm:"6"},d.a.createElement(W,{apiFunction:O.p,apiFunctionParams:{serverEndPoint:O.m},title:"Users",firstDimensionAggregationFields:F.c,secondDimensionAggregationFields:F.c,defaultAggregationField1:F.k,defaultAggregationField2:null,defaultShowValues:"Percentage",defaultChartType:"Bar",singleDimensionDataLegend:"Number of Users",specificMappingsForFields:t,loading:j.a})),d.a.createElement(h.a,{sm:"6"},d.a.createElement(W,{apiFunction:O.p,apiFunctionParams:{serverEndPoint:O.m},title:"Users",firstDimensionAggregationFields:F.c,secondDimensionAggregationFields:F.c,defaultAggregationField1:F.k,defaultAggregationField2:F.t,defaultShowValues:"Hide values",defaultChartType:"Radar",singleDimensionDataLegend:"Number of Users",specificMappingsForFields:t,loading:j.a})))}),Object(j.a)({}))))))))))}}]),a}(u.Component);t.default=_}}]);
//# sourceMappingURL=60.9e387286.chunk.js.map